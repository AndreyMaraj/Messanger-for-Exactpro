{"ast":null,"code":"var _jsxFileName = \"/home/maria/Messenger-for-Exactpro/client-master/src/components/UserAvatar.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { observer } from 'mobx-react';\nimport { Avatar, Badge, createStyles, makeStyles, withStyles } from '@material-ui/core'; // Аватар пользователя\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserAvatar = observer(_c = _s(({\n  user,\n  onlineStatusStore,\n  size\n}) => {\n  _s();\n\n  const [status, setStatus] = useState(false); // \"Онлайн\" статус пользователя\n\n  const useStyles = makeStyles(theme => // Стили\n  createStyles({\n    avatar: {\n      width: theme.spacing(size),\n      height: theme.spacing(size)\n    }\n  }));\n  const classes = useStyles(); // Классы стилей\n  // обновление статуса \n\n  function Status() {\n    setTimeout(Update, 16000);\n    const d1 = new Date();\n    const d2 = onlineStatusStore.userTimes.get(user.name);\n\n    if (d2 !== undefined) {\n      if (d1.getTime() >= d2.getTime() + 15000) {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      return false;\n    }\n  } // Проверка на значение статуса \"онлайн\" пользователя\n\n\n  function Update() {\n    const d1 = new Date(); // Время сейчас\n\n    const d2 = onlineStatusStore.userTimes.get(user.name); // Время последнего пребывания \"онлайн\" пользователя\n\n    if (d2 !== undefined) {\n      if (d1.getTime() >= d2.getTime() + 15000) {\n        // Сравнение времени последнего пребывания \"онлайн\" пользователя \n        setStatus(false);\n      } else {\n        setStatus(true);\n      }\n    } else {\n      setStatus(false); // Если нет информации - пользователь не \"онлайн\"\n    }\n  }\n\n  const StyledBadge = withStyles(theme => // Аватарка с \"оналайн\" статусом\n  createStyles({\n    badge: {\n      backgroundColor: '#44b700',\n      color: '#44b700',\n      boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\n      '&::after': {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        borderRadius: '50%',\n        animation: '$ripple 1.2s infinite ease-in-out',\n        border: '1px solid currentColor',\n        content: '\"\"'\n      }\n    },\n    '@keyframes ripple': {\n      '0%': {\n        transform: 'scale(.8)',\n        opacity: 1\n      },\n      '100%': {\n        transform: 'scale(2.4)',\n        opacity: 0\n      }\n    }\n  }))(Badge);\n  return Status() ? /*#__PURE__*/_jsxDEV(StyledBadge, {\n    overlap: \"circle\",\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'right'\n    },\n    variant: \"dot\",\n    children: /*#__PURE__*/_jsxDEV(Avatar, {\n      src: user.picture,\n      className: classes.avatar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n    src: user.picture,\n    className: classes.avatar\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 13\n  }, this);\n}, \"HpAKb7lJKQz3cGeAvY3eBbFe0Uc=\", false, function () {\n  return [useStyles];\n}));\n_c2 = UserAvatar;\nexport default UserAvatar;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserAvatar$observer\");\n$RefreshReg$(_c2, \"UserAvatar\");","map":{"version":3,"sources":["/home/maria/Messenger-for-Exactpro/client-master/src/components/UserAvatar.tsx"],"names":["useState","observer","Avatar","Badge","createStyles","makeStyles","withStyles","UserAvatar","user","onlineStatusStore","size","status","setStatus","useStyles","theme","avatar","width","spacing","height","classes","Status","setTimeout","Update","d1","Date","d2","userTimes","get","name","undefined","getTime","StyledBadge","badge","backgroundColor","color","boxShadow","palette","background","paper","position","top","left","borderRadius","animation","border","content","transform","opacity","vertical","horizontal","picture"],"mappings":"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","sourcesContent":["import {useState} from 'react'\nimport {observer} from 'mobx-react';\nimport OnlineStatusStore from '../stores/OnlineStatusStore';\nimport { Avatar, Badge, createStyles, makeStyles, Theme, withStyles } from '@material-ui/core';\n\n// Аватар пользователя\nconst UserAvatar = observer(({user, onlineStatusStore, size}: {user: {name: string, picture: string}, onlineStatusStore: OnlineStatusStore, size: number}) => {\n\n    const [status, setStatus] = useState<boolean>(false) // \"Онлайн\" статус пользователя\n\n    const useStyles = makeStyles((theme: Theme) => // Стили\n        createStyles({\n            avatar: {\n                width: theme.spacing(size),\n                height: theme.spacing(size)\n            }\n        })\n    )\n    const classes = useStyles() // Классы стилей\n\n    // обновление статуса \n    function Status(): boolean {\n        setTimeout(Update, 16000)\n        const d1: Date = new Date()\n        const d2: Date | undefined = onlineStatusStore.userTimes.get(user.name)\n        if (d2 !== undefined){\n            if (d1.getTime() >= d2.getTime() + 15000){\n                return (false)\n            }\n            else {\n                return (true)\n            }\n        }\n        else {\n            return (false)\n        }\n    }\n    \n    // Проверка на значение статуса \"онлайн\" пользователя\n    function Update(): void {\n        const d1: Date = new Date() // Время сейчас\n        const d2: Date | undefined = onlineStatusStore.userTimes.get(user.name) // Время последнего пребывания \"онлайн\" пользователя\n        if (d2 !== undefined){\n            if (d1.getTime() >= d2.getTime() + 15000){ // Сравнение времени последнего пребывания \"онлайн\" пользователя \n                setStatus (false)\n            }\n            else {\n                setStatus (true)\n            }\n        }\n        else {\n            setStatus (false) // Если нет информации - пользователь не \"онлайн\"\n        }\n    }\n    const StyledBadge = withStyles((theme: Theme) => // Аватарка с \"оналайн\" статусом\n        createStyles({\n            badge: {\n                backgroundColor: '#44b700',\n                color: '#44b700',\n                boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\n                '&::after': {\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    height: '100%',\n                    borderRadius: '50%',\n                    animation: '$ripple 1.2s infinite ease-in-out',\n                    border: '1px solid currentColor',\n                    content: '\"\"'\n                }\n            },\n            '@keyframes ripple': {\n                '0%': {\n                    transform: 'scale(.8)',\n                    opacity: 1\n                },\n                '100%': {\n                    transform: 'scale(2.4)',\n                    opacity: 0\n                }\n            }\n        })\n    )(Badge)\n\n    return (\n        Status() ?\n            <StyledBadge\n                overlap=\"circle\"\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'right',\n                }}\n                variant=\"dot\"\n            >\n                <Avatar \n                    src={user.picture} \n                    className={classes.avatar}\n                />\n            </StyledBadge>\n        :\n            <Avatar \n                src={user.picture} \n                className={classes.avatar}\n            />\n    )\n    \n})\n\nexport default UserAvatar\n"]},"metadata":{},"sourceType":"module"}