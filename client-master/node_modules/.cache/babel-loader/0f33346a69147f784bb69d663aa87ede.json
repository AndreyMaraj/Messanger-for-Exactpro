{"ast":null,"code":"var _jsxFileName = \"/Users/andrejturin/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Messenger-for-Exactpro/client-master/src/components/Authorization.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport Requests from '../Requests';\nimport Cookie from '../Cookie';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Avatar, Button, Container, TextField, Typography } from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'; // Форма авторизации (вход/регистрация)\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Authorization = () => {\n  _s();\n\n  const [username, setUsername] = useState(\"\"); // Введеный ник\n\n  const [password, setPassword] = useState(\"\"); // Введенный пароль\n  // const crypt = require('crypto') // Функция хэширования пароля\n  // Стили для формы\n\n  const useStyles = makeStyles(theme => ({\n    paper: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main\n    },\n    form: {\n      width: '100%',\n      marginTop: theme.spacing(1)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n      color: \"primary\"\n    }\n  }));\n  const classes = useStyles(); // Классы стилей \n  // Валидация формы\n\n  function FormSubmit() {\n    if (username === \"\" || password === \"\") {\n      alert(\"Not all fields of the form are filled in.\");\n      return false;\n    }\n\n    return true;\n  } // Успешная авторизация\n\n\n  function IsAuthorized() {\n    // props.LogIn() // Выход из формы авторизации\n    var request = Requests.Alive(); // Оповщение сервер, что клиент \"онлайн\"\n\n    switch (request === null || request === void 0 ? void 0 : request.status) {\n      case 0:\n        break;\n\n      case 200:\n        break;\n\n      case 401:\n        alert(\"User is not logged in.\");\n        break;\n\n      default:\n        alert(\"Error.\");\n        break;\n    }\n  } // Вход в мессенджер\n\n\n  function LogIn() {\n    if (FormSubmit()) {\n      var hashPassword = crypt.createHash('sha256').update(password).digest('hex'); // Хэширование пароля\n\n      var request = Requests.LogIn(username, hashPassword); // Запрос на вход\n\n      switch (request.status) {\n        case 200:\n          Cookie.Set('key', JSON.parse(request.responseText).key);\n          IsAuthorized();\n          break;\n\n        case 401:\n          alert(\"User is not logged in.\");\n          break;\n\n        default:\n          alert(\"Error.\");\n          break;\n      }\n    }\n  } // Регистрация\n\n\n  function SignIn() {\n    if (FormSubmit()) {\n      var data = {\n        // Формирование данных для запроса на сервер\n        name: username,\n        password: crypt.createHash('sha256').update(password).digest('hex') // Хэширование пароля\n\n      };\n      var request = Requests.SignIn(data); // Запорс на регистрацию\n\n      switch (request.status) {\n        case 200:\n          Cookie.Set('key', JSON.parse(request.responseText).key); // Кладем ключ сессии в куки бразузера\n\n          IsAuthorized(); // Успешная авторизация\n\n          break;\n\n        case 406:\n          alert(\"Username is taken.\");\n          break;\n\n        default:\n          alert(\"Error.\");\n          break;\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.paper,\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        className: classes.avatar,\n        children: /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h1\",\n        variant: \"h5\",\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          id: \"username\",\n          label: \"User name\",\n          name: \"username\",\n          autoComplete: \"off\",\n          value: username,\n          onChange: event => setUsername(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          name: \"password\",\n          label: \"Password\",\n          type: \"password\",\n          id: \"password\",\n          autoComplete: \"off\",\n          value: password,\n          onChange: event => setPassword(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          fullWidth: true,\n          variant: \"contained\",\n          className: classes.submit,\n          onClick: () => LogIn(),\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          fullWidth: true,\n          variant: \"contained\",\n          className: classes.submit,\n          onClick: () => SignIn(),\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Authorization, \"w5drAqmWVfW8iPf2IzFdLRPXy08=\", true);\n\n_c = Authorization;\nexport default Authorization;\n\nvar _c;\n\n$RefreshReg$(_c, \"Authorization\");","map":{"version":3,"names":["useState","Requests","Cookie","makeStyles","Avatar","Button","Container","TextField","Typography","LockOutlinedIcon","Authorization","username","setUsername","password","setPassword","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","color","classes","FormSubmit","alert","IsAuthorized","request","Alive","status","LogIn","hashPassword","crypt","createHash","update","digest","Set","JSON","parse","responseText","key","SignIn","data","name","event","target","value"],"sources":["/Users/andrejturin/Документы/Messenger-for-Exactpro/client-master/src/components/Authorization.tsx"],"sourcesContent":["import {useState} from 'react'\nimport Requests from '../Requests'\nimport Cookie from '../Cookie'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Avatar, Button, Container, TextField, Typography } from '@material-ui/core'\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'\n\n// Форма авторизации (вход/регистрация)\nconst Authorization = () => {\n\n  const [username, setUsername] = useState<string>(\"\") // Введеный ник\n  const [password, setPassword] = useState<string>(\"\") // Введенный пароль\n  // const crypt = require('crypto') // Функция хэширования пароля\n  // Стили для формы\n  const useStyles: any = makeStyles((theme) => ({ \n    paper: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main\n    },\n    form: {\n      width: '100%',\n      marginTop: theme.spacing(1)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n      color: \"primary\"\n    }\n  }))\n  const classes: any = useStyles() // Классы стилей \n\n  // Валидация формы\n  function FormSubmit(): boolean {\n    if(username === \"\" || password === \"\") {\n      alert(\"Not all fields of the form are filled in.\");\n      return false;\n    }\n    return true;\n  }\n\n  // Успешная авторизация\n  function IsAuthorized(): void{\n    // props.LogIn() // Выход из формы авторизации\n    var request: {responseText: string, status: number} | null = Requests.Alive() // Оповщение сервер, что клиент \"онлайн\"\n    switch(request?.status){\n      case 0:\n        break\n      case 200:\n        break\n      case 401:\n        alert(\"User is not logged in.\")\n        break\n      default:\n        alert(\"Error.\")\n        break\n    }\n  }\n\n  // Вход в мессенджер\n  function LogIn(): void{\n    if (FormSubmit()) {\n      var hashPassword: string = crypt.createHash('sha256').update(password).digest('hex') // Хэширование пароля\n      var request: {responseText: string, status: number} = Requests.LogIn(username, hashPassword) // Запрос на вход\n      switch(request.status){\n        case 200:\n          Cookie.Set('key', JSON.parse(request.responseText).key)\n          IsAuthorized()\n          break\n        case 401:\n          alert(\"User is not logged in.\")\n          break\n        default:\n          alert(\"Error.\")\n          break\n      }\n    }\n  }\n\n  // Регистрация\n  function SignIn(): void{\n    if (FormSubmit()){\n      var data: {name: string, password: string} = { // Формирование данных для запроса на сервер\n        name: username,\n        password: crypt.createHash('sha256').update(password).digest('hex') // Хэширование пароля\n      }\n      var request: {responseText: string, status: number} = Requests.SignIn(data) // Запорс на регистрацию\n      switch(request.status){\n        case 200:\n          Cookie.Set('key', JSON.parse(request.responseText).key) // Кладем ключ сессии в куки бразузера\n          IsAuthorized() // Успешная авторизация\n          break\n        case 406:\n          alert(\"Username is taken.\")\n          break\n        default:\n          alert(\"Error.\")\n          break\n      }\n    }\n  }\n\n  return (\n      <Container \n        component=\"main\" \n        maxWidth=\"xs\"\n      >\n        <div \n          className={classes.paper}\n        >\n          <Avatar \n            className={classes.avatar}\n          >\n            <LockOutlinedIcon />\n          </Avatar>\n          <Typography\n            component=\"h1\" \n            variant=\"h5\"\n          >\n            Sign Up\n          </Typography>\n          <form\n            className={classes.form}\n            noValidate\n          >\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"username\"\n              label=\"User name\"\n              name=\"username\"\n              autoComplete=\"off\"\n              value={username}\n              onChange={event=>setUsername(event.target.value)}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"off\"\n              value={password} \n              onChange={event=>setPassword(event.target.value)}\n            />\n            <Button\n              type=\"button\"\n              fullWidth\n              variant=\"contained\"\n              className={classes.submit}\n              onClick={()=>LogIn()}\n            >\n              Log In\n            </Button>\n            <Button\n              type=\"button\"\n              fullWidth\n              variant=\"contained\"\n              className={classes.submit}\n              onClick={()=>SignIn()}\n            >\n              Sign In\n            </Button>\n          </form>\n        </div>\n      </Container>\n    )\n}\n\nexport default Authorization"],"mappings":"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"},"metadata":{},"sourceType":"module"}