{"ast":null,"code":"var _jsxFileName = \"/Users/andrejturin/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Messenger-for-Exactpro/client-master/src/components/ChangeProfileInfo.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport Requests from '../Requests';\nimport { AppBar, Avatar, Button, Container, createStyles, makeStyles, TextField, Toolbar, Typography } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete'; // Форма редактирования профиля пользователя\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChangeProfileInfo = props => {\n  _s();\n\n  const [newUsername, setNewUsername] = useState(props.profileInfo.name); // имя пользователя\n\n  const [newBio, setNewBio] = useState(props.profileInfo.bio); // био\n\n  const [newPicture, setNewPicture] = useState(props.profileInfo.picture); // фото пользователя\n\n  const useStyles = makeStyles(theme => // стили \n  createStyles({\n    content: {\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden'\n    },\n    header: {\n      position: \"static\",\n      flexGrow: 1,\n      height: '10%'\n    },\n    headerTitle: {\n      flexGrow: 1\n    },\n    headerButton: {\n      marginRight: theme.spacing(2),\n      color: 'white',\n      background: '#3d50b6'\n    },\n    changeProfileInfo: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      alignItems: 'center'\n    },\n    largeAvatar: {\n      width: theme.spacing(15),\n      height: theme.spacing(15)\n    },\n    setNewPhotoButton: {},\n    deletePhotoButton: {\n      background: 'red'\n    },\n    editNameButton: {},\n    editBioButton: {}\n  }));\n  const classes = useStyles(); // классы стилей\n  // Загрузка файла\n\n  function LoadPic(event) {\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => {\n      var _reader$result;\n\n      // обработка события чтения файла \n      var file = (_reader$result = reader.result) === null || _reader$result === void 0 ? void 0 : _reader$result.toString();\n\n      if (file) {\n        setNewPicture(file);\n      }\n    });\n\n    reader.onerror = error => {\n      // обрабокта ошибки чтения файла\n      alert('Error: ' + error);\n    };\n\n    reader.readAsDataURL(event.target.files[0]); // чтение файла\n  } // Сохранение данных \n\n\n  function SaveChanges() {\n    let data = {\n      // подготвка данных к отправке на сервер\n      name: newUsername,\n      bio: newBio,\n      picture: newPicture\n    };\n    var request = Requests.ChangeProfileInfo(data); // Отправка запроса о редактировании данных профиля\n\n    switch (request === null || request === void 0 ? void 0 : request.status) {\n      case 200:\n        props.Done();\n        break;\n\n      case 401:\n        alert(\"User is not logged in.\");\n        break;\n\n      default:\n        alert(\"Error.\");\n        break;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.content,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      className: classes.header,\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => props.Done(),\n          variant: \"outlined\",\n          className: classes.headerButton,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.headerTitle,\n          variant: \"h6\",\n          noWrap: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => SaveChanges(),\n          variant: \"outlined\",\n          className: classes.headerButton,\n          children: \"Done\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: classes.changeProfileInfo,\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        src: newPicture,\n        className: classes.largeAvatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        className: classes.setNewPhotoButton,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: event => LoadPic(event),\n          hidden: true,\n          accept: \".png, .jpg, .jpeg, .svg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), \"Set New Photo\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), newPicture !== '' ? /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        className: classes.deletePhotoButton,\n        onClick: () => setNewPicture(''),\n        children: [/*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }, this), \"Delete\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }, this) : null, /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Name\",\n        variant: \"standard\",\n        value: newUsername,\n        className: classes.editNameButton,\n        onChange: event => setNewUsername(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Bio\",\n        variant: \"standard\",\n        value: newBio,\n        className: classes.editBioButton,\n        onChange: event => setNewBio(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChangeProfileInfo, \"mCATaJbBkFX+hCzYZ3ge1DrDV9M=\", true);\n\n_c = ChangeProfileInfo;\nexport default ChangeProfileInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangeProfileInfo\");","map":{"version":3,"sources":["/Users/andrejturin/Документы/Messenger-for-Exactpro/client-master/src/components/ChangeProfileInfo.tsx"],"names":["useState","Requests","AppBar","Avatar","Button","Container","createStyles","makeStyles","TextField","Toolbar","Typography","DeleteIcon","ChangeProfileInfo","props","newUsername","setNewUsername","profileInfo","name","newBio","setNewBio","bio","newPicture","setNewPicture","picture","useStyles","theme","content","width","height","overflow","header","position","flexGrow","headerTitle","headerButton","marginRight","spacing","color","background","changeProfileInfo","marginTop","display","flexDirection","alignItems","largeAvatar","setNewPhotoButton","deletePhotoButton","editNameButton","editBioButton","classes","LoadPic","event","reader","FileReader","addEventListener","file","result","toString","onerror","error","alert","readAsDataURL","target","files","SaveChanges","data","request","status","Done","value"],"mappings":"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","sourcesContent":["import { ChangeEvent, useState } from 'react'\nimport Requests from '../Requests'\nimport { ProfileInfo } from \"../interfaces/ProfileInfo\"\nimport { AppBar, Avatar, Button, Container, createStyles, makeStyles, TextField, Theme, Toolbar, Typography } from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete'\n\n// Форма редактирования профиля пользователя\nconst ChangeProfileInfo = (props: {profileInfo: ProfileInfo, Done: ()=> void}) => {\n\n    const [newUsername, setNewUsername] = useState<string>(props.profileInfo.name) // имя пользователя\n    const [newBio, setNewBio] = useState<string>(props.profileInfo.bio) // био\n    const [newPicture, setNewPicture] = useState<string>(props.profileInfo.picture) // фото пользователя\n\n    const useStyles = makeStyles((theme: Theme) => // стили \n        createStyles({\n            content: {\n                width: '100%',\n                height: '100%',\n                overflow: 'hidden'\n            },\n            header: {\n                position: \"static\",\n                flexGrow: 1,\n                height: '10%'\n            },\n            headerTitle: {\n                flexGrow: 1\n            },\n            headerButton: {\n                marginRight: theme.spacing(2),\n                color: 'white',\n                background: '#3d50b6'\n            },\n            changeProfileInfo: {\n                marginTop: theme.spacing(8),\n                display: 'flex',\n                flexDirection: 'column',\n                height: '100%',\n                alignItems: 'center'\n            },\n            largeAvatar: {\n                width: theme.spacing(15),\n                height: theme.spacing(15)\n            },\n            setNewPhotoButton: {\n\n            },\n            deletePhotoButton: {\n                background: 'red'\n            },\n            editNameButton: {\n\n            },\n            editBioButton: {\n\n            }\n        })\n    )\n    const classes = useStyles() // классы стилей\n    \n    // Загрузка файла\n    function LoadPic(event: any): void {\n        const reader: FileReader = new FileReader()\n        reader.addEventListener(\"load\", ()=>{ // обработка события чтения файла \n            var file: string | undefined = reader.result?.toString()\n            if(file){\n                setNewPicture(file)\n            }\n        })\n        reader.onerror = (error) => { // обрабокта ошибки чтения файла\n            alert('Error: ' + error)\n        }\n        reader.readAsDataURL(event.target.files[0]) // чтение файла\n    }\n\n    // Сохранение данных \n    function SaveChanges(): void {\n        let data: ProfileInfo = { // подготвка данных к отправке на сервер\n            name: newUsername,\n            bio: newBio,\n            picture: newPicture\n        }\n        var request: {responseText: string, status: number} | null = Requests.ChangeProfileInfo(data) // Отправка запроса о редактировании данных профиля\n        switch(request?.status){\n            case 200:\n                props.Done()\n                break\n            case 401:\n                alert(\"User is not logged in.\")\n                break\n            default:\n                alert(\"Error.\")\n                break\n        }\n    }\n\n    return (\n        <div\n            className={classes.content}\n        >\n            <AppBar \n                className={classes.header}\n            >\n                <Toolbar>\n                    <Button\n                        onClick={()=>props.Done()}\n                        variant=\"outlined\"\n                        className={classes.headerButton}\n                    >\n                        Cancel\n                    </Button>\n                    <Typography \n                        className={classes.headerTitle}\n                        variant=\"h6\" \n                        noWrap\n                    />\n                    <Button\n                        onClick={()=>SaveChanges()}\n                        variant=\"outlined\"\n                        className={classes.headerButton}\n                    >\n                        Done\n                    </Button>\n                </Toolbar>\n            </AppBar>\n            <Container\n                className={classes.changeProfileInfo}\n            >\n                <Avatar \n                    src={newPicture} \n                    className={classes.largeAvatar}\n                />\n                <Button\n                    variant=\"outlined\"\n                    className={classes.setNewPhotoButton}\n                >\n                    <input\n                        type=\"file\"\n                        onChange={(event: ChangeEvent<HTMLInputElement>)=>LoadPic(event)}\n                        hidden\n                        accept=\".png, .jpg, .jpeg, .svg\"\n                    />\n                    Set New Photo\n                </Button>\n                {newPicture !== '' ?\n                    <Button\n                        variant=\"contained\"\n                        className={classes.deletePhotoButton}\n                        onClick={()=>setNewPicture('')}\n                    >\n                        <DeleteIcon />\n                        Delete\n                    </Button>\n                : null\n                }\n                <TextField\n                    label=\"Name\"\n                    variant=\"standard\"\n                    value={newUsername}\n                    className={classes.editNameButton}\n                    onChange={event=>setNewUsername(event.target.value)}\n                />\n                <TextField\n                    label=\"Bio\"\n                    variant=\"standard\"\n                    value={newBio}\n                    className={classes.editBioButton}\n                    onChange={event=>setNewBio(event.target.value)}\n                />\n            </Container>\n        </div>\n    )\n}\n\nexport default ChangeProfileInfo"]},"metadata":{},"sourceType":"module"}