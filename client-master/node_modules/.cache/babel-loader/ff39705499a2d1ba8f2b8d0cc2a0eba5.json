{"ast":null,"code":"var _jsxFileName = \"/Users/andrejturin/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Messenger-for-Exactpro/client-master/src/components/ChangeProfileInfo.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport Requests from '../Requests';\nimport { AppBar, Avatar, Button, Container, createStyles, makeStyles, TextField, Toolbar, Typography } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete'; // Форма редактирования профиля пользователя\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChangeProfileInfo = props => {\n  _s();\n\n  const [newUsername, setNewUsername] = useState(props.profileInfo.name); // имя пользователя\n\n  const [newBio, setNewBio] = useState(props.profileInfo.bio); // био\n\n  const [newPicture, setNewPicture] = useState(props.profileInfo.picture); // фото пользователя\n\n  const useStyles = makeStyles(theme => // стили \n  createStyles({\n    content: {\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden'\n    },\n    header: {\n      position: \"static\",\n      flexGrow: 1,\n      height: '10%'\n    },\n    headerTitle: {\n      flexGrow: 1\n    },\n    headerButton: {\n      marginRight: theme.spacing(2),\n      color: 'white',\n      background: '#3d50b6'\n    },\n    changeProfileInfo: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      alignItems: 'center'\n    },\n    largeAvatar: {\n      width: theme.spacing(15),\n      height: theme.spacing(15)\n    },\n    setNewPhotoButton: {},\n    deletePhotoButton: {\n      background: 'red'\n    },\n    editNameButton: {},\n    editBioButton: {}\n  }));\n  const classes = useStyles(); // классы стилей\n  // Загрузка файла\n\n  function LoadPic(event) {\n    const reader = new FileReader();\n    debugger;\n    reader.addEventListener(\"load\", () => {\n      var _reader$result;\n\n      // обработка события чтения файла \n      var file = (_reader$result = reader.result) === null || _reader$result === void 0 ? void 0 : _reader$result.toString();\n\n      if (file) {\n        setNewPicture(file);\n      }\n    });\n\n    reader.onerror = error => {\n      // обрабокта ошибки чтения файла\n      alert('Error: ' + error);\n    };\n\n    reader.readAsDataURL(event.target.files[0]); // чтение файла\n  } // Сохранение данных \n\n\n  function SaveChanges() {\n    let data = {\n      // подготвка данных к отправке на сервер\n      name: newUsername,\n      bio: newBio,\n      picture: newPicture\n    };\n    var request = Requests.ChangeProfileInfo(data); // Отправка запроса о редактировании данных профиля\n\n    switch (request === null || request === void 0 ? void 0 : request.status) {\n      case 200:\n        props.Done();\n        break;\n\n      case 401:\n        alert(\"User is not logged in.\");\n        break;\n\n      default:\n        alert(\"Error.\");\n        break;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.content,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      className: classes.header,\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => props.Done(),\n          variant: \"outlined\",\n          className: classes.headerButton,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.headerTitle,\n          variant: \"h6\",\n          noWrap: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => SaveChanges(),\n          variant: \"outlined\",\n          className: classes.headerButton,\n          children: \"Done\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: classes.changeProfileInfo,\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        src: newPicture,\n        className: classes.largeAvatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        component: \"label\",\n        className: classes.setNewPhotoButton,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: event => LoadPic(event),\n          hidden: true,\n          accept: \".png, .jpg, .jpeg, .svg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), \"Set New Photo\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), newPicture !== '' ? /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        className: classes.deletePhotoButton,\n        onClick: () => setNewPicture(''),\n        children: [/*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 25\n        }, this), \"Delete\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }, this) : null, /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Name\",\n        variant: \"standard\",\n        value: newUsername,\n        className: classes.editNameButton,\n        onChange: event => setNewUsername(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Bio\",\n        variant: \"standard\",\n        value: newBio,\n        className: classes.editBioButton,\n        onChange: event => setNewBio(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChangeProfileInfo, \"mCATaJbBkFX+hCzYZ3ge1DrDV9M=\", true);\n\n_c = ChangeProfileInfo;\nexport default ChangeProfileInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangeProfileInfo\");","map":{"version":3,"names":["useState","Requests","AppBar","Avatar","Button","Container","createStyles","makeStyles","TextField","Toolbar","Typography","DeleteIcon","ChangeProfileInfo","props","newUsername","setNewUsername","profileInfo","name","newBio","setNewBio","bio","newPicture","setNewPicture","picture","useStyles","theme","content","width","height","overflow","header","position","flexGrow","headerTitle","headerButton","marginRight","spacing","color","background","changeProfileInfo","marginTop","display","flexDirection","alignItems","largeAvatar","setNewPhotoButton","deletePhotoButton","editNameButton","editBioButton","classes","LoadPic","event","reader","FileReader","addEventListener","file","result","toString","onerror","error","alert","readAsDataURL","target","files","SaveChanges","data","request","status","Done","value"],"sources":["/Users/andrejturin/Документы/Messenger-for-Exactpro/client-master/src/components/ChangeProfileInfo.tsx"],"sourcesContent":["import { ChangeEvent, useState } from 'react'\nimport Requests from '../Requests'\nimport { ProfileInfo } from \"../interfaces/ProfileInfo\"\nimport { AppBar, Avatar, Button, Container, createStyles, makeStyles, TextField, Theme, Toolbar, Typography } from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete'\n\n// Форма редактирования профиля пользователя\nconst ChangeProfileInfo = (props: {profileInfo: ProfileInfo, Done: ()=> void}) => {\n\n    const [newUsername, setNewUsername] = useState<string>(props.profileInfo.name) // имя пользователя\n    const [newBio, setNewBio] = useState<string>(props.profileInfo.bio) // био\n    const [newPicture, setNewPicture] = useState<string>(props.profileInfo.picture) // фото пользователя\n\n    const useStyles = makeStyles((theme: Theme) => // стили \n        createStyles({\n            content: {\n                width: '100%',\n                height: '100%',\n                overflow: 'hidden'\n            },\n            header: {\n                position: \"static\",\n                flexGrow: 1,\n                height: '10%'\n            },\n            headerTitle: {\n                flexGrow: 1\n            },\n            headerButton: {\n                marginRight: theme.spacing(2),\n                color: 'white',\n                background: '#3d50b6'\n            },\n            changeProfileInfo: {\n                marginTop: theme.spacing(8),\n                display: 'flex',\n                flexDirection: 'column',\n                height: '100%',\n                alignItems: 'center'\n            },\n            largeAvatar: {\n                width: theme.spacing(15),\n                height: theme.spacing(15)\n            },\n            setNewPhotoButton: {\n\n            },\n            deletePhotoButton: {\n                background: 'red'\n            },\n            editNameButton: {\n\n            },\n            editBioButton: {\n\n            }\n        })\n    )\n    const classes = useStyles() // классы стилей\n    \n    // Загрузка файла\n    function LoadPic(event: any): void {\n        const reader: FileReader = new FileReader()\n        debugger\n        reader.addEventListener(\"load\", ()=>{ // обработка события чтения файла \n            var file: string | undefined = reader.result?.toString()\n            if(file){\n                setNewPicture(file)\n            }\n        })\n        reader.onerror = (error) => { // обрабокта ошибки чтения файла\n            alert('Error: ' + error)\n        }\n        reader.readAsDataURL(event.target.files[0]) // чтение файла\n    }\n\n    // Сохранение данных \n    function SaveChanges(): void {\n        let data: ProfileInfo = { // подготвка данных к отправке на сервер\n            name: newUsername,\n            bio: newBio,\n            picture: newPicture\n        }\n        var request: {responseText: string, status: number} | null = Requests.ChangeProfileInfo(data) // Отправка запроса о редактировании данных профиля\n        switch(request?.status){\n            case 200:\n                props.Done()\n                break\n            case 401:\n                alert(\"User is not logged in.\")\n                break\n            default:\n                alert(\"Error.\")\n                break\n        }\n    }\n\n    return (\n        <div\n            className={classes.content}\n        >\n            <AppBar \n                className={classes.header}\n            >\n                <Toolbar>\n                    <Button\n                        onClick={()=>props.Done()}\n                        variant=\"outlined\"\n                        className={classes.headerButton}\n                    >\n                        Cancel\n                    </Button>\n                    <Typography \n                        className={classes.headerTitle}\n                        variant=\"h6\" \n                        noWrap\n                    />\n                    <Button\n                        onClick={()=>SaveChanges()}\n                        variant=\"outlined\"\n                        className={classes.headerButton}\n                    >\n                        Done\n                    </Button>\n                </Toolbar>\n            </AppBar>\n            <Container\n                className={classes.changeProfileInfo}\n            >\n                <Avatar \n                    src={newPicture} \n                    className={classes.largeAvatar}\n                />\n                <Button\n                    variant=\"outlined\"\n                    component=\"label\"\n                    className={classes.setNewPhotoButton}\n                >\n                    <input\n                        type=\"file\"\n                        onChange={(event: ChangeEvent<HTMLInputElement>)=>LoadPic(event)}\n                        hidden\n                        accept=\".png, .jpg, .jpeg, .svg\"\n                    />\n                    Set New Photo\n                </Button>\n                {newPicture !== '' ?\n                    <Button\n                        variant=\"contained\"\n                        className={classes.deletePhotoButton}\n                        onClick={()=>setNewPicture('')}\n                    >\n                        <DeleteIcon />\n                        Delete\n                    </Button>\n                : null\n                }\n                <TextField\n                    label=\"Name\"\n                    variant=\"standard\"\n                    value={newUsername}\n                    className={classes.editNameButton}\n                    onChange={event=>setNewUsername(event.target.value)}\n                />\n                <TextField\n                    label=\"Bio\"\n                    variant=\"standard\"\n                    value={newBio}\n                    className={classes.editBioButton}\n                    onChange={event=>setNewBio(event.target.value)}\n                />\n            </Container>\n        </div>\n    )\n}\n\nexport default ChangeProfileInfo"],"mappings":"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"},"metadata":{},"sourceType":"module"}