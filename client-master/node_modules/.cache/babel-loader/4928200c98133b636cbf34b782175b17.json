{"ast":null,"code":"var _jsxFileName = \"/Users/andrejturin/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Messenger-for-Exactpro/client-master/src/components/Messages.tsx\",\n    _s = $RefreshSig$();\n\nimport { observer } from 'mobx-react-lite';\nimport Cookie from '../Cookie';\nimport Requests from '../Requests';\nimport { Avatar, createStyles, IconButton, List, ListItem, ListItemAvatar, ListItemSecondaryAction, ListItemText, makeStyles } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DoneIcon from '@material-ui/icons/Done';\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport React from 'react'; // сообщения чата\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Messages = _s(observer(_c = _s(_ref => {\n  _s();\n\n  let {\n    messagesStore,\n    chatInfo,\n    EditMessage\n  } = _ref;\n  const useStyles = makeStyles(theme => // стили\n  createStyles({\n    messages: {\n      overflow: 'auto',\n      width: 600,\n      height: 350\n    },\n    myMessage: {\n      background: 'deepskyblue'\n    },\n    anyMessage: {},\n    smallAvatar: {\n      width: theme.spacing(5),\n      height: theme.spacing(5)\n    },\n    root: {\n      width: '100%',\n      backgroundColor: theme.palette.background.paper\n    }\n  }));\n  const classes = useStyles(); // классы стилей\n  // прочтение сообщения\n\n  function ReadMessage(message) {\n    let data = {\n      // подготовка данных для отправки на сервер \n      chatId: chatInfo.id,\n      id: message.id\n    };\n    var request = Requests.ReadMessage(data); // отправка запроса на сервер о прочтении сообщения\n\n    switch (request === null || request === void 0 ? void 0 : request.status) {\n      case 200:\n        break;\n\n      case 400:\n        alert(\"\");\n        break;\n\n      default:\n        break;\n    }\n  } // Удаление сообщения\n\n\n  function DeleteMessage(messageId) {\n    let data = {\n      // подготовка данных  для отправки на сервер\n      chatId: chatInfo.id,\n      id: messageId\n    };\n    var request = Requests.DeleteMessage(data); // отправка запроса на сервер об удалении сообщения\n\n    switch (request === null || request === void 0 ? void 0 : request.status) {\n      case 200:\n        break;\n\n      case 400:\n        alert(\"\");\n        break;\n\n      default:\n        break;\n    }\n  } // проверка строки на URL\n\n\n  function isURL(str) {\n    try {\n      var url = new URL(str);\n      return url.toString().indexOf('.') !== -1;\n    } catch {\n      return false;\n    }\n  } // запрос на файл\n\n\n  function FileRequest(src) {\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", src, false);\n    request.send();\n\n    switch (request.status) {\n      case 200:\n        break;\n\n      case 400:\n        alert(\"Данные некорректны!\");\n        break;\n\n      default:\n        break;\n    }\n\n    return request.responseText;\n  }\n\n  return /*#__PURE__*/_jsxDEV(List, {\n    className: classes.root,\n    children: messagesStore.messagesData.map((message, index) => {\n      if (chatInfo.id === message.chatId) {\n        var _message$files;\n\n        // если сообщение из этого чата\n        var messageWithSources = [];\n        var sources = [];\n        var sourcesAttachments = [];\n        var messageTextCopy = message.text; // обрезаем строку на составляющие (строка, ссылка)\n\n        messageTextCopy.replace(/(https?:\\/\\/[^\\s]+)/g, url => {\n          sources[sources.length] = url;\n          messageWithSources[messageWithSources.length] = messageTextCopy.substring(0, messageTextCopy.indexOf(url));\n          messageWithSources[messageWithSources.length] = /*#__PURE__*/_jsxDEV(\"a\", {\n            href: url,\n            target: \"_blank\",\n            children: url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 73\n          }, this);\n\n          if (isURL(url)) {\n            sourcesAttachments[sourcesAttachments.length] = url;\n          }\n\n          messageTextCopy = messageTextCopy.substring(messageTextCopy.indexOf(url) + url.length);\n          return '';\n        });\n        messageWithSources[messageWithSources.length] = messageTextCopy;\n\n        if (!message.read && !message.mine) {\n          ReadMessage(message); // прочтение сообщения\n        }\n\n        return /*#__PURE__*/_jsxDEV(ListItem, {\n          alignItems: \"flex-start\",\n          className: message.mine ? classes.myMessage : classes.anyMessage,\n          children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              src: message.senderPicture,\n              className: classes.smallAvatar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n            primary: message.sender,\n            secondary: /*#__PURE__*/_jsxDEV(React.Fragment, {\n              children: [messageWithSources, /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [message.time, message.edited ? /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 49\n                }, this) : null, message.mine && message.read ? /*#__PURE__*/_jsxDEV(DoneAllIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 49\n                }, this) : /*#__PURE__*/_jsxDEV(DoneIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 47\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 29\n          }, this), sourcesAttachments.map((source, i) => {\n            if (source.substring(source.lastIndexOf('.')) === '.png' || source.substring(source.lastIndexOf('.')) === '.jpg' || source.substring(source.lastIndexOf('.')) === '.jpeg' || source.substring(source.lastIndexOf('.')) === '.svg') {\n              return /*#__PURE__*/_jsxDEV(\"img\", {\n                src: source\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 44\n              }, this);\n            }\n\n            if (source.substring(source.lastIndexOf('.')) === '.mp3') {\n              return /*#__PURE__*/_jsxDEV(\"audio\", {\n                controls: true,\n                src: source\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 44\n              }, this);\n            }\n\n            if (source.substring(source.lastIndexOf('.')) === '.mp4') {\n              return /*#__PURE__*/_jsxDEV(\"video\", {\n                autoPlay: true,\n                loop: true,\n                muted: true,\n                controls: true,\n                src: source\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 44\n              }, this);\n            }\n          }), (_message$files = message.files) === null || _message$files === void 0 ? void 0 : _message$files.map((file, i) => {\n            var cookieKeySession = Cookie.Get('key'); // Достаем из куки данные\n\n            if (cookieKeySession) {\n              var _file$type, _file$type2, _file$type3, _file$type4, _file$type5, _file$type6;\n\n              return ((_file$type = file.type) === null || _file$type === void 0 ? void 0 : _file$type.slice(0, (_file$type2 = file.type) === null || _file$type2 === void 0 ? void 0 : _file$type2.indexOf('/'))) === 'image' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 45\n              }, this) : ((_file$type3 = file.type) === null || _file$type3 === void 0 ? void 0 : _file$type3.slice(0, (_file$type4 = file.type) === null || _file$type4 === void 0 ? void 0 : _file$type4.indexOf('/'))) === 'video' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"video\", {\n                  autoPlay: true,\n                  loop: true,\n                  muted: true,\n                  controls: true,\n                  src: FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id),\n                  download: file.name,\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    children: \"Download\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 199\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 45\n              }, this) : ((_file$type5 = file.type) === null || _file$type5 === void 0 ? void 0 : _file$type5.slice(0, (_file$type6 = file.type) === null || _file$type6 === void 0 ? void 0 : _file$type6.indexOf('/'))) === 'audio' ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n                  controls: true,\n                  src: FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id)\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id),\n                  download: file.name,\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    children: \"Download\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 199\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 45\n              }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n                href: FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id),\n                download: file.name,\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  children: file.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 203\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 45\n              }, this);\n            }\n          }), /*#__PURE__*/_jsxDEV(ListItemSecondaryAction, {\n            children: [message.mine ? /*#__PURE__*/_jsxDEV(IconButton, {\n              edge: \"end\",\n              \"aria-label\": \"delete\",\n              children: /*#__PURE__*/_jsxDEV(EditIcon, {\n                onClick: () => EditMessage(message)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 33\n            }, this) : null, message.mine || chatInfo.type === '2' && (chatInfo.role === 'owner' || chatInfo.role === 'admin' && message.senderRole === 'none') ? /*#__PURE__*/_jsxDEV(IconButton, {\n              edge: \"end\",\n              \"aria-label\": \"delete\",\n              children: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n                onClick: () => DeleteMessage(message.id)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 37\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }, this);\n      }\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n}, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n})), \"8g5FPXexvSEOsxdmU7HicukHGqY=\", true);\n\n_c2 = Messages;\nexport default Messages;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Messages$observer\");\n$RefreshReg$(_c2, \"Messages\");","map":{"version":3,"names":["observer","Cookie","Requests","Avatar","createStyles","IconButton","List","ListItem","ListItemAvatar","ListItemSecondaryAction","ListItemText","makeStyles","DeleteIcon","EditIcon","DoneIcon","DoneAllIcon","React","Messages","messagesStore","chatInfo","EditMessage","useStyles","theme","messages","overflow","width","height","myMessage","background","anyMessage","smallAvatar","spacing","root","backgroundColor","palette","paper","classes","ReadMessage","message","data","chatId","id","request","status","alert","DeleteMessage","messageId","isURL","str","url","URL","toString","indexOf","FileRequest","src","XMLHttpRequest","open","send","responseText","messagesData","map","index","messageWithSources","sources","sourcesAttachments","messageTextCopy","text","replace","length","substring","read","mine","senderPicture","sender","time","edited","source","i","lastIndexOf","files","file","cookieKeySession","Get","type","slice","name","role","senderRole"],"sources":["/Users/andrejturin/Документы/Messenger-for-Exactpro/client-master/src/components/Messages.tsx"],"sourcesContent":["import {observer} from 'mobx-react-lite'\nimport Cookie from '../Cookie'\nimport Requests from '../Requests'\nimport MessagesStore from '../stores/MessagesStore'\nimport {MessagesUpdate} from \"../interfaces/MessagesUpdate\"\nimport { Avatar, Button, createStyles, IconButton, List, ListItem, ListItemAvatar, ListItemSecondaryAction, ListItemText, makeStyles, Theme } from '@material-ui/core'\nimport { ChatsUpdate } from '../interfaces/ChatsUpdate'\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DoneIcon from '@material-ui/icons/Done';\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport React from 'react'\n\n// сообщения чата\nconst Messages = observer(({messagesStore, chatInfo, EditMessage}:{messagesStore: MessagesStore, chatInfo: ChatsUpdate, EditMessage: (message: MessagesUpdate)=> void})=>{\n\n    const useStyles = makeStyles((theme: Theme) => // стили\n        createStyles({\n            messages: {\n                overflow: 'auto',\n                width: 600,\n                height: 350\n            },\n            myMessage: {\n                background: 'deepskyblue'\n            },\n            anyMessage: {\n\n            },\n            smallAvatar: {\n                width: theme.spacing(5),\n                height: theme.spacing(5)\n            },\n            root: {\n                width: '100%',\n                backgroundColor: theme.palette.background.paper,\n              },\n        })\n    )\n    const classes = useStyles() // классы стилей\n\n    // прочтение сообщения\n    function ReadMessage(message: MessagesUpdate): void{\n        let data: {chatId: string, id: string} = { // подготовка данных для отправки на сервер \n            chatId: chatInfo.id, \n            id: message.id\n        }\n        var request: {responseText: string, status: number} | null = Requests.ReadMessage(data) // отправка запроса на сервер о прочтении сообщения\n        switch(request?.status){\n            case 200:\n                break\n            case 400:\n                alert(\"\")\n                break\n            default:\n                break\n        }\n    }\n\n    // Удаление сообщения\n    function DeleteMessage(messageId: string): void{\n        let data: {chatId: string, id: string} = { // подготовка данных  для отправки на сервер\n            chatId: chatInfo.id, \n            id: messageId\n        }\n        var request: {responseText: string, status: number} | null = Requests.DeleteMessage(data) // отправка запроса на сервер об удалении сообщения\n        switch(request?.status){\n            case 200:\n                break\n            case 400:\n                alert(\"\")\n                break\n            default:\n                break\n        }\n    }\n\n    // проверка строки на URL\n    function isURL(str: string): boolean{\n        try {\n            var url = new URL(str)\n            return url.toString().indexOf('.') !== -1\n        } \n        catch {\n            return false\n        }\n    }\n\n    // запрос на файл\n    function FileRequest(src: string): string{\n        var request: XMLHttpRequest = new XMLHttpRequest()\n        request.open(\"GET\", src, false)\n        request.send()\n        switch(request.status){\n            case 200:\n                break\n            case 400:\n                alert(\"Данные некорректны!\")\n                break\n            default:\n                break\n        }\n        return request.responseText\n    }\n\n    return (\n        <List className={classes.root} >\n            {messagesStore.messagesData.map((message: MessagesUpdate, index: number) => {\n                if (chatInfo.id === message.chatId){ // если сообщение из этого чата\n                    var messageWithSources: any[] = []\n                    var sources: string[] = []\n                    var sourcesAttachments: string[] = []\n                    var messageTextCopy = message.text\n                    // обрезаем строку на составляющие (строка, ссылка)\n                    messageTextCopy.replace(/(https?:\\/\\/[^\\s]+)/g, (url) => {\n                        sources[sources.length] = url\n                        messageWithSources[messageWithSources.length] = messageTextCopy.substring(0, messageTextCopy.indexOf(url))\n                        messageWithSources[messageWithSources.length] = <a href={url} target=\"_blank\">{url}</a>\n                        if (isURL(url)){\n                            sourcesAttachments[sourcesAttachments.length] = url\n                        }\n                        messageTextCopy = messageTextCopy.substring(messageTextCopy.indexOf(url) + url.length)\n                        return ''\n                    })\n                    messageWithSources[messageWithSources.length] = messageTextCopy\n                    if(!message.read && !message.mine){\n                        ReadMessage(message) // прочтение сообщения\n                    }\n                    return(\n                        <ListItem alignItems=\"flex-start\" \n                            key={index}\n                            className={message.mine ? classes.myMessage : classes.anyMessage}\n                        >\n                            <ListItemAvatar>\n                                <Avatar \n                                    src={message.senderPicture} \n                                    className={classes.smallAvatar}\n                                />\n                            </ListItemAvatar>\n                            <ListItemText\n                                primary={message.sender}\n                                secondary={\n                                    <React.Fragment>\n                                        {messageWithSources}\n                                        <div>\n                                            {message.time}\n                                            {message.edited ?\n                                                <EditIcon />\n                                            : null\n                                            }\n                                            {message.mine && message.read ?\n                                                <DoneAllIcon/>\n                                            : <DoneIcon />\n                                            }\n                                        </div>\n                                    </React.Fragment>\n                                }\n                            />\n                            {sourcesAttachments.map((source: string, i: number)=>{\n                                if(source.substring(source.lastIndexOf('.')) === '.png' || source.substring(source.lastIndexOf('.')) === '.jpg' || source.substring(source.lastIndexOf('.')) === '.jpeg' || source.substring(source.lastIndexOf('.')) === '.svg'){\n                                    return <img key={i} src={source}/>\n                                }\n                                if(source.substring(source.lastIndexOf('.')) === '.mp3'){\n                                    return <audio key={i} controls src={source}/>\n                                }\n                                if(source.substring(source.lastIndexOf('.')) === '.mp4'){\n                                    return <video key={i} autoPlay loop muted controls src={source}/>\n                                }\n                            })}\n                            {message.files?.map((file: {name: string, type: string, id: string}, i: number)=>{\n                                var cookieKeySession: string | null = Cookie.Get('key') // Достаем из куки данные\n                                if(cookieKeySession){\n                                    return(\n                                        file.type?.slice(0, file.type?.indexOf('/')) === 'image' ?\n                                            <img key={i} src={\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id}/>\n                                        : file.type?.slice(0, file.type?.indexOf('/')) === 'video' ?\n                                            <div>\n                                                <video key={i} autoPlay loop muted controls src={FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id)}></video>\n                                                <a href={FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id)} download={file.name}><button>Download</button></a>\n                                            </div>\n                                        : file.type?.slice(0, file.type?.indexOf('/')) === 'audio' ?\n                                            <div>\n                                                <audio key={i} controls src={FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id)} />\n                                                <a href={FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id)} download={file.name}><button>Download</button></a>\n                                            </div>\n                                        :\n                                            <a key={i} href={FileRequest(\"http://127.0.0.1:8081/get-file?key=\" + cookieKeySession + \"&chatId=\" + message.chatId + \"&id=\" + file.id)} download={file.name}><button>{file.name}</button></a>\n                                    )\n                                }\n                            })\n                            }\n                            <ListItemSecondaryAction>\n                            {message.mine ?\n                                <IconButton edge=\"end\" aria-label=\"delete\">\n                                    <EditIcon onClick={()=>EditMessage(message)}/>\n                                </IconButton>\n                            : null\n                            }\n                                {message.mine || (chatInfo.type === '2' && (chatInfo.role === 'owner' || (chatInfo.role === 'admin' && message.senderRole === 'none'))) ?\n                                    <IconButton edge=\"end\" aria-label=\"delete\">\n                                        <DeleteIcon onClick={()=>DeleteMessage(message.id)}/>\n                                    </IconButton>\n                                : null\n                                }\n                                \n                            </ListItemSecondaryAction>\n                        </ListItem>\n                    )\n                }\n            })}\n        </List>\n    )\n})\n\nexport default Messages"],"mappings":"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"},"metadata":{},"sourceType":"module"}